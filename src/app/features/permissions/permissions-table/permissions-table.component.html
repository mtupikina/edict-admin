<div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4">
  <p class="text-slate-600">Permission names (e.g. words:read) used to protect routes.</p>
  <p-button
    label="Add Permission"
    icon="pi pi-plus"
    (onClick)="addPermission.emit()"
    styleClass="shadow-soft"
  />
</div>
<div class="bg-white rounded-2xl shadow-soft border border-slate-200/60 overflow-hidden">
  <p-table
    [value]="permissions()"
    [loading]="loading()"
    styleClass="p-datatable-sm p-datatable-striped"
    [responsiveLayout]="'scroll'"
  >
    <ng-template pTemplate="header">
      <tr>
        <th pSortableColumn="name">Name <p-sortIcon field="name" /></th>
        <th>Description</th>
        <th>Actions</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-perm>
      <tr>
        <td class="font-mono font-medium">{{ perm.name }}</td>
        <td class="text-slate-600">{{ perm.description || 'â€”' }}</td>
        <td>
          <div class="flex gap-2">
            <p-button
              icon="pi pi-pencil"
              [rounded]="true"
              [text]="true"
              severity="secondary"
              (onClick)="editPermission.emit(perm)"
              pTooltip="Edit"
              tooltipPosition="top"
            />
            <p-button
              icon="pi pi-trash"
              [rounded]="true"
              [text]="true"
              severity="danger"
              (onClick)="deletePermission.emit({ perm, event: $event })"
              pTooltip="Delete"
              tooltipPosition="top"
            />
          </div>
        </td>
      </tr>
    </ng-template>
    <ng-template pTemplate="emptymessage">
      <tr>
        <td colspan="3" class="text-center py-12 text-slate-500">No permissions.</td>
      </tr>
    </ng-template>
  </p-table>
</div>
