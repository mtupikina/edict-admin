<p-dialog
  [visible]="visible()"
  (visibleChange)="visible.set($event)"
  [header]="user() ? 'Edit User' : 'Create User'"
  [modal]="true"
  [style]="{ width: 'min(100%, 400px)' }"
  [draggable]="false"
  [resizable]="false"
  (onHide)="close()"
  styleClass="edict-dialog"
>
  <form [formGroup]="form" (ngSubmit)="submit()" class="flex flex-col gap-5 edict-form-in-dialog">
    <div>
      <label for="firstName" class="block text-sm font-semibold text-slate-700 mb-1.5">
        First Name
      </label>
      <input
        id="firstName"
        pInputText
        formControlName="firstName"
        class="w-full"
        placeholder="First name"
      />
      @if (form.get('firstName')?.invalid && form.get('firstName')?.touched) {
        <small class="text-red-600">First name is required</small>
      }
    </div>
    <div>
      <label for="lastName" class="block text-sm font-semibold text-slate-700 mb-1.5">
        Last Name
      </label>
      <input
        id="lastName"
        pInputText
        formControlName="lastName"
        class="w-full"
        placeholder="Last name"
      />
      @if (form.get('lastName')?.invalid && form.get('lastName')?.touched) {
        <small class="text-red-600">Last name is required</small>
      }
    </div>
    <div>
      <label for="email" class="block text-sm font-semibold text-slate-700 mb-1.5">
        Email
      </label>
      <input
        id="email"
        pInputText
        formControlName="email"
        type="email"
        class="w-full"
        placeholder="Email"
        [readonly]="!!user()"
      />
      @if (form.get('email')?.invalid && form.get('email')?.touched) {
        <small class="text-red-600">Valid email is required</small>
      }
    </div>
    <div>
      <label for="role" class="block text-sm font-semibold text-slate-700 mb-1.5">
        Role
      </label>
      <p-dropdown
        inputId="role"
        formControlName="role"
        [options]="roles"
        optionLabel="label"
        optionValue="value"
        placeholder="Select role"
        styleClass="w-full"
        [appendTo]="'body'"
      />
      @if (form.get('role')?.invalid && form.get('role')?.touched) {
        <small class="text-red-600">Role is required</small>
      }
    </div>
  </form>
  <ng-template pTemplate="footer">
    <p-button label="Cancel" severity="secondary" [outlined]="true" (onClick)="close()" />
    <p-button
      label="Save"
      (onClick)="submit()"
      [loading]="saving()"
      styleClass="min-w-[100px]"
    />
  </ng-template>
</p-dialog>
